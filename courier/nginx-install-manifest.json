{
  "name": "INSTALL NGINX with PUPPET MANIFEST if InSpec Test Passes - node-linux",
  "description": "Install NGINX with Puppet Manifest if InSpec Test Passes - node-linux-03 080625.2",
  "exceptionRules": [],
  "scheduleRule": "immediate",
  "target": {
    "executionType": "sequential",
    "groups": [
      {
        "batchSize": {
          "type": "number",
          "value": 1
        },
        "distributionMethod": "batching",
        "earlyTermination": false,
        "filter": null,
        "filterId": "00000000-0000-0000-0000-000000000000",
        "listId": "00000000-0000-0000-0000-000000000000",
        "nodeIdentifiers": [
          "36a487d6-ae25-4b06-a17a-57b2a8905c36"
        ],
        "nodeListType": "nodes",
        "successCriteria": [
          {
            "numRuns": {
              "type": "percent",
              "value": 100
            },
            "status": "success"
          }
        ],
        "timeoutSeconds": 240
      }
    ]
  },
  "actions": {
    "accessMode": "agent",
    "steps": [
      {
        "command": {
          "args": {
            "path": "https://github.com/snohio/manifests"
          },
          "exec": "scan"
        },
        "conditions": [],
        "description": "",
        "expectedInputs": {},
        "failureBehavior": {
          "action": "retryThenFail",
          "retryBackoffStrategy": {
            "arguments": [],
            "delaySeconds": 0,
            "type": "linear"
          }
        },
        "inputs": {},
        "interpreter": {
          "name": "chef-platform/inspec-interpreter",
          "skill": {
            "maxVersion": "5.22.95",
            "minVersion": "1"
          }
        },
        "limits": {
          "cores": 0,
          "cpu": 1,
          "timeoutSeconds": 0
        },
        "name": "Puppet InSpec Test",
        "outputFieldRules": {
          "PUPPET_INSPEC": {
            "expression": "",
            "extractMethod": "content",
            "required": true,
            "sensitive": false,
            "source": "stdout",
            "sourceType": "output"
          }
        },
        "retryCount": 1
      },
      {
        "command": {
          "linux": [
            "curl -o nginx.pp https://raw.githubusercontent.com/snohio/manifests/main/nginx.pp",
            "puppet apply nginx.pp"
          ]
        },
        "conditions": [
          {
            "inputName": "PUPPET_INSPEC",
            "negate": false,
            "operator": "contains",
            "value": "0 control failures"
          }
        ],
        "description": "",
        "expectedInputs": {
          "PUPPET_INSPEC": {
            "default": "",
            "required": true,
            "sensitive": false
          }
        },
        "failureBehavior": {
          "action": "retryThenFail",
          "retryBackoffStrategy": {
            "arguments": [],
            "delaySeconds": 0,
            "type": "linear"
          }
        },
        "inputs": {},
        "interpreter": {
          "name": "chef-platform/shell-interpreter",
          "skill": {
            "maxVersion": "2",
            "minVersion": "1"
          }
        },
        "limits": {
          "cores": 0,
          "cpu": 1,
          "timeoutSeconds": 0
        },
        "name": "Install NGINX with Puppet",
        "outputFieldRules": {},
        "retryCount": 1
      }
    ]
  }
}
